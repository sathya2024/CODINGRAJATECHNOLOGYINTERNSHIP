let songs = [
    {
        name: 'UNDER THE INFLUENCE',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track1.mp3',
        artist: 'CHRIS BROWN',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic1.jpg'
    },
    {
        name: 'MOCKINGBIRD',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track2.mp3',
        artist: 'EMINEM',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic2.jpg'
    },
    {
        name: 'INDUSTRY BABY',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track3.mp3',
        artist: 'LIL NAS X',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic3.jpg'
    },
    {
        name: 'HEAT WAVES',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track4.mp3',
        artist: 'GLASS ANIMALS',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic4.jpg'
    },
    {
        name: 'FADED',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track5.mp3',
        artist: 'ALAN WALKER',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic5.jpg'
    },
    {
        name: 'NO LIE',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track6.mp3',
        artist: 'SEAN PAUL',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic6.jpg'
    },
    {
        name: 'UNSTOPPABLE',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track7.mp3',
        artist: 'SIA',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic7.jpg'
    },
    {
        name: 'SHAPE OF YOU',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track8.mp3',
        artist: 'ED SHEERAN',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic8.jpg'
    },
    {
        name: 'CLOSER',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track9.mp3',
        artist: 'CHAINSMOKERS',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic9.jpg'
    },
    {
        name: 'MIDDLE OF THE NIGHT',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track10.mp3',
        artist: 'ELLEY DUHE',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic10.jpg'
    },
    {
        name: 'KURCHI MADATHAPETTI',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track11.mp3',
        artist: 'THAMAS S',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic11.jpg'
    },
    {
        name: 'DUM MASALA',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track12.mp3',
        artist: 'SANJITH HEGDE',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic12.jpg'
    },
    {
        name: 'SOUND OF SALAAR',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track13.mp3',
        artist: 'RAVI BASUR',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic13.jpg'
    },
    {
        name: 'NAATU NAATU',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track14.mp3',
        artist: 'KAALA BHAIRAVA',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic14.jpg'
    },
    {
        name: 'OH ANTAVA MAVA',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track15.mp3',
        artist: 'INDRAVATHI CHAUHAN',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic15.jpg'
    },
    {
        name: 'HEERIYE',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track16.mp3',
        artist: 'ARIJITH SINGH',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic16.jpg'
    },
    {
        name: 'BEKHAYALI',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track17.mp3',
        artist: 'SACHET TANDON',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic17.jpg'
    },
    {
        name: 'DEVA DEVA',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track18.mp3',
        artist: 'ARIJITH SINGH',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic18.jpg'
    },
    {
        name: 'KESARIYA',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track19.mp3',
        artist: 'ARIJITH SINGH',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic19.jpg'
    },
    {
        name: 'SUBHANALLAH',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track20.mp3',
        artist: 'SHILPA RAO',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic20.jpg'
    },
    {
        name: 'TERE PYAR MEIN',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track21.mp3',
        artist: 'ARIJITH SINGH',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic21.jpg'
    },
    {
        name: 'ARJAN VAILLY',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track22.mp3',
        artist: 'SONU NIGAM',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic22.jpg'
    },
    {
        name: 'BOMBE HELUTAITHE',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track23.mp3',
        artist: 'VIJAY PRAKASH',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic23.jpg'
    },
    {
        name: 'KAAGADADA DONIYALLI',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track24.mp3',
        artist: 'VASUKI VAIBHAV',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic24.jpg'
    },
    {
        name: 'SALAAM ROCKY BHAI',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track25.mp3',
        artist: 'ABHISHEK SONAM',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic25.jpg'
    },
    {
        name: 'GARBADHI',
        path: 'C:/Users/sathy/Desktop/task2/requirements/songs/track26.mp3',
        artist: 'ANANYA BHAT',
        cover: 'C:/Users/sathy/Desktop/task2/requirements/pics/pic26.jpg'
    },
   
   
   

];

document.addEventListener('DOMContentLoaded', function () {
    const carousel = [...document.querySelectorAll('.carousel img')];
    let carouselImageIndex = 0;

   
    const changeCarousel = () => {
        carousel[carouselImageIndex].classList.toggle('active');
        if (carouselImageIndex >= carousel.length - 1) {
            carouselImageIndex = 0;
        } else {
            carouselImageIndex++;
        }
        carousel[carouselImageIndex].classList.toggle('active');
    }

   
    setInterval(() => {
        changeCarousel();
    }, 2500);


    function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = Math.floor(seconds % 60);
        return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
    }

    let currentMusic = 0;
    const songName = document.querySelector('.current-song-name');
    const artistName = document.querySelector('.artist-name');
    const coverImage = document.querySelector('.cover');
    const audio = document.getElementById('audio-source');
    const playBtn = document.querySelector('.bx-play-circle');
    const pauseBtn = document.querySelector('.bx-pause');
    const volumeSlider = document.querySelector('.volume-slider');
    const seekBar = document.querySelector('.music-seek-bar');
    const currentTime = document.querySelector('.current-time');
    const duration = document.querySelector('.duration');
    const forwardBtn = document.querySelector('.bx-last-page');
    const backwardBtn = document.querySelector('.bx-first-page');
    const shuffleBtn = document.querySelector('.bx-shuffle');
    const repeatBtn = document.querySelector('.bx-repeat');
    const playlistItems = document.querySelectorAll('.queue');
    const volumeBtn = document.querySelector('.bx-volume-full');
    const queue = [...document.querySelectorAll('.queue')];

    let isPlaying = false;

   
    function setMusic(index) {
        const currentSong = songs[index];
        songName.textContent = currentSong.name;
        artistName.textContent = currentSong.artist;
        coverImage.src = currentSong.cover;
        audio.src = currentSong.path;
    }

   
    playBtn.addEventListener('click', function () {
        if (!isPlaying) {
            audio.play();
            isPlaying = true;
            playBtn.classList.remove('active');
            pauseBtn.classList.add('active');
        }
    });

    
    pauseBtn.addEventListener('click', function () {
        if (isPlaying) {
            audio.pause();
            isPlaying = false;
            playBtn.classList.add('active');
            pauseBtn.classList.remove('active');
        }
    });

   
    forwardBtn.addEventListener('click', function () {
        currentMusic = (currentMusic + 1) % songs.length;
        setMusic(currentMusic);
        if (isPlaying) audio.play();
    });

    
    backwardBtn.addEventListener('click', function () {
        currentMusic = (currentMusic - 1 + songs.length) % songs.length;
        setMusic(currentMusic);
        if (isPlaying) audio.play();
    });

    
    shuffleBtn.addEventListener('click', function () {
        const shuffledIndex = Math.floor(Math.random() * songs.length);
        setMusic(shuffledIndex);
        if (isPlaying) audio.play();
    });

    
    repeatBtn.addEventListener('click', function () {
        audio.loop = !audio.loop;
        repeatBtn.classList.toggle('active', audio.loop);
    });

    
    playlistItems.forEach((item, index) => {
        item.addEventListener('click', function () {
            currentMusic = index;
            setMusic(currentMusic);
            if (isPlaying) audio.play();
        });
    });

    
    volumeSlider.addEventListener('input', function () {
        audio.volume = volumeSlider.value;
    });

    
    seekBar.addEventListener('input', function () {
        const seekTime = (audio.duration / 100) * seekBar.value;
        audio.currentTime = seekTime;
    });

    
    audio.addEventListener('timeupdate', function () {
        const currentTimeValue = formatTime(audio.currentTime);
        const durationValue = formatTime(audio.duration);

        currentTime.textContent = currentTimeValue;
        duration.textContent = durationValue;

        const progress = (audio.currentTime / audio.duration) * 100;
        seekBar.value = progress;
    });

   
    const musicPlayerSection = document.querySelector('.music-player-section');
    let clickCount = 1;
    musicPlayerSection.addEventListener('click', () => {
        if (clickCount >= 2) {
            musicPlayerSection.classList.add('active');
            clickCount = 1;
            return;
        }
        clickCount++;
        setTimeout(() => {
            clickCount = 1;
        }, 250);
    });

    
    const backToHomeBtn = document.querySelector('.music-player-section .back-btn');
    backToHomeBtn.addEventListener('click', () => {
        musicPlayerSection.classList.remove('active');
    });

    
    const playlistSection = document.querySelector('.playlist');
    const navBtn = document.querySelector('.music-player-section .nav-btn');
    navBtn.addEventListener('click', () => {
        playlistSection.classList.add('active');
    });

    
    const backToMusicPlayer = document.querySelector('.playlist .back-btn');
    backToMusicPlayer.addEventListener('click', () => {
        playlistSection.classList.remove('active');
    });

    audio.addEventListener('ended', function () {
        if (shuffleBtn.classList.contains('active')) {
            const shuffledIndex = Math.floor(Math.random() * songs.length);
            setMusic(shuffledIndex);
        } else {
            currentMusic = (currentMusic + 1) % songs.length;
            setMusic(currentMusic);
        }
        if (isPlaying) audio.play();
    });

    shuffleBtn.addEventListener('click', function () {
       
        shuffleBtn.classList.toggle('active');

       
        if (shuffleBtn.classList.contains('active')) {
            const shuffledIndex = Math.floor(Math.random() * songs.length);
            setMusic(shuffledIndex);
        } else {
            currentMusic = (currentMusic + 1) % songs.length;
            setMusic(currentMusic);
        }
        if (isPlaying) audio.play();
    });
    
    repeatBtn.addEventListener('click', function () {
        audio.loop = !audio.loop;
        repeatBtn.classList.toggle('active', audio.loop);
    });
    
    playlistItems.forEach((item, index) => {
        item.addEventListener('click', function () {
            const previousActiveItem = document.querySelector('.queue.active');
            if (previousActiveItem) {
                previousActiveItem.classList.remove('active');
            }
            item.classList.add('active');
            currentMusic = index;
            setMusic(currentMusic);
            if (isPlaying) {
                audio.play();
            }
        });
    });
   
    playlistItems.forEach((item, index) => {
        item.addEventListener('click', function () {
            const previousActiveItem = document.querySelector('.queue.active');
            if (previousActiveItem) {
                previousActiveItem.classList.remove('active');
                previousActiveItem.querySelector('.bx-pause').classList.remove('active');
            }
            item.classList.add('active');
            item.querySelector('.bx-pause').classList.add('active');
            currentMusic = index;
            setMusic(currentMusic);
            if (isPlaying) {
                audio.play();
            }
        });
    });
  
    playlistItems.forEach((item, index) => {
        item.addEventListener('click', function () {
            const previousActiveItem = document.querySelector('.queue.active');
            if (previousActiveItem) {
                previousActiveItem.classList.remove('active');
                previousActiveItem.querySelector('.bx-pause').classList.remove('active');
            }
            item.classList.add('active');
            item.querySelector('.bx-pause').classList.add('active');
            currentMusic = index;
            setMusic(currentMusic);
            audio.play();
        });
    });

    repeatBtn.addEventListener('click', function () {
        audio.loop = !audio.loop;
        repeatBtn.classList.toggle('active', audio.loop);
    });

    volumeBtn.addEventListener('click', () => {
        volumeBtn.classList.toggle('active');
        volumeSlider.classList.toggle('active');
    })

    volumeSlider.addEventListener('input', () => {
        music.volume = volumeSlider.value;
    })
    queue.forEach((item, i) => {
        item.addEventListener('click', () => {
            setMusic(i);
            playBtn.click();
        })
    })
    let currentPlaylistItem = null;
    function setMusic(index) {
        if (currentPlaylistItem) {
            currentPlaylistItem.classList.remove('active');
        }
        currentMusic = index;
        currentPlaylistItem = playlistItems[currentMusic];
        currentPlaylistItem.classList.add('active');
        const currentSong = songs[currentMusic];
        songName.textContent = currentSong.name;
        artistName.textContent = currentSong.artist;
        coverImage.src = currentSong.cover;
        audio.src = currentSong.path;
    }
    playBtn.addEventListener('click', function () {
        if (!isPlaying) {
            audio.play();
            isPlaying = true;
            playBtn.classList.remove('active');
            pauseBtn.classList.add('active');
            if (currentPlaylistItem) {
                currentPlaylistItem.querySelector('.bx-pause').classList.add('active');
            }
        }
    });
    pauseBtn.addEventListener('click', function () {
        if (isPlaying) {
            audio.pause();
            isPlaying = false;
            playBtn.classList.add('active');
            pauseBtn.classList.remove('active');
            if (currentPlaylistItem) {
                currentPlaylistItem.querySelector('.bx-pause').classList.remove('active');
            }
        }
    });
    playlistItems.forEach((item, index) => {
        item.addEventListener('click', function () {
            if (currentPlaylistItem) {
                currentPlaylistItem.classList.remove('active');
                currentPlaylistItem.querySelector('.bx-pause').classList.remove('active');
            }
            item.classList.add('active');
            item.querySelector('.bx-pause').classList.add('active');
            currentMusic = index;
            setMusic(currentMusic);
            if (isPlaying) {
                audio.play();
            } else {
                audio.pause();
            }
        });
    });


    audio.addEventListener('timeupdate', function () {
        let currentTimeValue = '00:00';
        let durationValue = '00:00';

        if (!isNaN(audio.duration) && isFinite(audio.duration)) {
            currentTimeValue = formatTime(audio.currentTime);
            durationValue = formatTime(audio.duration);
        }

        currentTime.textContent = currentTimeValue;
        duration.textContent = durationValue;

        if (!isNaN(audio.duration) && isFinite(audio.duration)) {
            const progress = (audio.currentTime / audio.duration) * 100;
            seekBar.value = progress;
        }
    });
    
        setMusic(currentMusic);
    });


